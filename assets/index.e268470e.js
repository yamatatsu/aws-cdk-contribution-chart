import{R as v,T as k,X as A,A as D,C as X,V as R,a as O,l as d,b as F,B as C,L as f,c as T,p,d as Y,e as m,f as x,o as I,g as P}from"./vendor.fdf4cbf2.js";const L=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}};L();const N=100;class j{constructor(t,s){this.stepDuration=s;const r=v.new(t);r.numberFormatter.setAll({numberFormat:"#a",bigNumberPrefixes:[{number:1e6,suffix:"M"},{number:1e9,suffix:"B"}],smallNumberPrefixes:[]}),r.setThemes([k.new(r)]);const e=r.container.children.push(A.new(r,{paddingTop:0,panX:!0,panY:!0,wheelX:"none",wheelY:"none"}));e.zoomOutButton.set("forceHidden",!0);const n=D.new(r,{minGridDistance:10,inversed:!0});n.grid.template.set("visible",!1);const l=e.yAxes.push(X.new(r,{maxDeviation:0,categoryField:"network",renderer:n})),c=e.xAxes.push(R.new(r,{maxDeviation:0,min:0,strictMinMax:!0,extraMax:.1,renderer:O.new(r,{})}));c.set("interpolationDuration",s/10),c.set("interpolationEasing",d);const o=e.series.push(F.new(r,{xAxis:c,yAxis:l,valueXField:"value",categoryYField:"network"}));o.columns.template.setAll({cornerRadiusBR:5,cornerRadiusTR:5}),o.columns.template.adapters.add("fill",(b,u)=>e.get("colors")?.getIndex(o.columns.indexOf(u))),o.columns.template.adapters.add("stroke",(b,u)=>e.get("colors")?.getIndex(o.columns.indexOf(u))),o.bullets.push(()=>C.new(r,{locationX:1,sprite:f.new(r,{text:"{valueXWorking.formatNumber('#.')}",fill:T.fromRGB(100,100,100),centerX:p,centerY:Y,populateText:!0})}));const w=e.plotContainer.children.push(f.new(r,{fontSize:"8em",opacity:.1,x:m,y:p,centerY:p,centerX:m}));this.chart=e,this.yAxis=l,this.series=o,this.label=w}chart;series;yAxis;label;sortCategoryAxis(){this.series.dataItems.sort((t,s)=>(s.get("valueX")??0)-(t.get("valueX")??0)),x(this.yAxis.dataItems,t=>{const s=this.series.dataItems.find(n=>n.get("categoryY")===t.get("category"));if(!s)return;const r=this.series.dataItems.indexOf(s);if(t.get("index")===r)return;const e=(r-t.get("index",0))/this.series.dataItems.length;t.set("index",r),t.set("deltaPosition",-e),t.animate({key:"deltaPosition",to:0,duration:this.stepDuration/2,easing:I(P)})}),this.yAxis.dataItems.sort((t,s)=>(t.get("index")??0)-(s.get("index")??0))}setInitialData(t){Object.entries(t).forEach(([s,r])=>{this.series.data.push({network:s,value:r}),this.yAxis.data.push({network:s})})}updateDate(t){this.label.set("text",t)}update(t){x(this.series.dataItems,s=>{const r=s.get("categoryY")??"",e=t[r];!e||(s.animate({key:"valueX",to:e,duration:this.stepDuration,easing:d}),s.animate({key:"valueXWorking",to:e,duration:this.stepDuration,easing:d}))}),this.yAxis.zoom(0,N/this.yAxis.dataItems.length)}appear(){this.series.appear(1e3),this.chart.appear(1e3,100)}}function B(){return new Worker("/aws-cdk-contribution-chart/assets/worker.8d254d2f.js",{type:"module"})}const M=1500,g=new B,E=await fetch("./data.json"),W=await E.json(),i=new j("chartdiv",M),h=_(W),y=h.next();if(y.done)throw new Error("The data has no record.");const[,S]=y.value;i.setInitialData(S);i.appear();g.onmessage=a=>{switch(a.data.type){case"eventForFirstUpdate":{const t=h.next();if(t.done)throw new Error("The data has only one record.");const[s,r]=t.value;i.updateDate(s),i.update(r)}case"intervalForUpdate":{z();break}case"intervalForSort":{i.sortCategoryAxis();break}}};function z(){const a=h.next();if(a.done){g.postMessage("done");return}const[t,s]=a.value;i.updateDate(t),i.update(s)}function*_(a){for(const[t,s]of Object.entries(a))yield[t,s]}
