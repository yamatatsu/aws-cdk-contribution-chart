import{R as b,T as A,X as D,A as k,C as X,V as I,a as R,l as d,b as O,B as T,L as p,c as C,p as h,d as Y,e as m,f as x,o as P,g as L}from"./vendor.fdf4cbf2.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}};N();const B=100;class F{constructor(t,s){this.stepDuration=s;const r=b.new(t);r.numberFormatter.setAll({numberFormat:"#a",bigNumberPrefixes:[{number:1e6,suffix:"M"},{number:1e9,suffix:"B"}],smallNumberPrefixes:[]}),r.setThemes([A.new(r)]);const e=r.container.children.push(D.new(r,{paddingTop:0,panX:!0,panY:!0,wheelX:"none",wheelY:"none"}));e.zoomOutButton.set("forceHidden",!0);const n=k.new(r,{minGridDistance:10,inversed:!0});n.grid.template.set("visible",!1);const l=e.yAxes.push(X.new(r,{maxDeviation:0,categoryField:"network",renderer:n})),c=e.xAxes.push(I.new(r,{maxDeviation:0,min:0,strictMinMax:!0,extraMax:.1,renderer:R.new(r,{})}));c.set("interpolationDuration",s/10),c.set("interpolationEasing",d);const o=e.series.push(O.new(r,{xAxis:c,yAxis:l,valueXField:"value",categoryYField:"network"}));o.columns.template.setAll({cornerRadiusBR:5,cornerRadiusTR:5}),o.columns.template.adapters.add("fill",(w,u)=>e.get("colors")?.getIndex(o.columns.indexOf(u))),o.columns.template.adapters.add("stroke",(w,u)=>e.get("colors")?.getIndex(o.columns.indexOf(u))),o.bullets.push(()=>T.new(r,{locationX:1,sprite:p.new(r,{text:"{valueXWorking.formatNumber('#.')}",fill:C.fromRGB(100,100,100),centerX:h,centerY:Y,populateText:!0})}));const v=e.plotContainer.children.push(p.new(r,{fontSize:"8em",opacity:.1,x:m,y:h,centerY:h,centerX:m}));this.chart=e,this.yAxis=l,this.series=o,this.label=v}chart;series;yAxis;label;sortCategoryAxis(){this.series.dataItems.sort((t,s)=>(s.get("valueX")??0)-(t.get("valueX")??0)),x(this.yAxis.dataItems,t=>{const s=this.series.dataItems.find(n=>n.get("categoryY")===t.get("category"));if(!s)return;const r=this.series.dataItems.indexOf(s);if(t.get("index")===r)return;const e=(r-t.get("index",0))/this.series.dataItems.length;t.set("index",r),t.set("deltaPosition",-e),t.animate({key:"deltaPosition",to:0,duration:this.stepDuration/2,easing:P(L)})}),this.yAxis.dataItems.sort((t,s)=>(t.get("index")??0)-(s.get("index")??0))}setInitialData(t){Object.entries(t).forEach(([s,r])=>{this.series.data.push({network:s,value:r}),this.yAxis.data.push({network:s})})}updateDate(t){this.label.set("text",t)}update(t){x(this.series.dataItems,s=>{const r=s.get("categoryY")??"",e=t[r];!e||(s.animate({key:"valueX",to:e,duration:this.stepDuration,easing:d}),s.animate({key:"valueXWorking",to:e,duration:this.stepDuration,easing:d}))}),this.yAxis.zoom(0,B/this.yAxis.dataItems.length)}appear(){this.series.appear(1e3),this.chart.appear(1e3,100)}}const g=1e3,j=await fetch("./data.json"),E=await j.json();function*M(a){for(const[t,s]of Object.entries(a))yield[t,s]}const i=new F("chartdiv",g),f=M(E),z=setInterval(function(){const a=f.next();if(a.done){clearInterval(z),clearInterval(S);return}const[t,s]=a.value;i.updateDate(t),i.update(s)},g),S=setInterval(function(){i.sortCategoryAxis()},100),y=f.next();if(y.done)throw new Error("The data has no record.");const[,_]=y.value;i.setInitialData(_);setTimeout(function(){const a=f.next();if(a.done)throw new Error("The data has only one record.");const[t,s]=a.value;i.updateDate(t),i.update(s)},50);i.appear();
